<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>丑小鸭的博客领地</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.tpadmin.top/"/>
  <updated>2020-05-27T14:53:15.000Z</updated>
  <id>http://blog.tpadmin.top/</id>
  
  <author>
    <name>‘cuixiaogang&#39;</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>数据结构（一）之数据结构概述、稀疏数组、队列</title>
    <link href="http://blog.tpadmin.top/2020/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0%E3%80%81%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E3%80%81%E9%98%9F%E5%88%97/"/>
    <id>http://blog.tpadmin.top/2020/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0%E3%80%81%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E3%80%81%E9%98%9F%E5%88%97/</id>
    <published>2020-05-27T14:52:52.000Z</published>
    <updated>2020-05-27T14:53:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据结构（一）之数据结构概述、稀疏数组、队列"><a href="#数据结构（一）之数据结构概述、稀疏数组、队列" class="headerlink" title="数据结构（一）之数据结构概述、稀疏数组、队列"></a>数据结构（一）之数据结构概述、稀疏数组、队列</h1><h2 id="数据结构概述"><a href="#数据结构概述" class="headerlink" title="数据结构概述"></a>数据结构概述</h2><blockquote><p>数据结构是计算机存储、组织数据的方式。数据结构是指相互之间存在一种或多种特定关系的数据元素的集合。通常情况下，精心选择的数据结构可以带来更高的运行或者存储效率。数据结构往往同高效的检索算法和索引技术有关。</p></blockquote><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>数据结构(data structure)是带有结构特性的数据元素的集合，它研究的是数据的逻辑结构和数据的物理结构以及它们之间的相互关系，并对这种结构定义相适应的运算，设计出相应的算法，并确保经过这些运算以后所得到的新结构仍保持原来的结构类型。简而言之，数据结构是相互之间存在一种或多种特定关系的数据元素的集合，即带“结构”的数据元素的集合。“结构”就是指数据元素之间存在的关系，分为逻辑结构和存储结构（也称为物理结构）。</p><a id="more"></a><p>数据的逻辑结构和存储结构是数据结构的两个密切相关的方面，同一逻辑结构可以对应不同的存储结构。算法的设计取决于数据的逻辑结构，而算法的实现依赖于指定的存储结构。</p><p>数据结构的研究内容是构造复杂软件系统的基础，它的核心技术是分解与抽象。通过分解可以划分出数据的3个层次；再通过抽象，舍弃数据元素的具体内容，就得到逻辑结构。类似地，通过分解将处理要求划分成各种功能，再通过抽象舍弃实现细节，就得到运算的定义。上述两个方面的结合可以将问题变换为数据结构。这是一个从具体（即具体问题）到抽象（即数据结构）的过程。然后，通过增加对实现细节的考虑进一步得到存储结构和实现运算，从而完成设计任务。这是一个从抽象（即数据结构）到具体（即具体实现）的过程。</p><p>数据结构有很多种，一般来说，按照数据的逻辑结构对其进行简单的分类，包括线性结构和非线性结构两类；按照数据的存储结构对其分类，包括链式存储结构和顺序存储结构两类。</p><h3 id="线性结构"><a href="#线性结构" class="headerlink" title="线性结构"></a>线性结构</h3><blockquote><p>简单地说，线性结构就是表中各个结点具有线性关系。如果从数据结构的语言来描述，线性结构应该包括如下几点：</p></blockquote><ul><li>线性结构是非空集。</li><li>线性结构有且仅有一个开始结点和一个终端结点。</li><li>线性结构所有结点都最多只有一个直接前趋结点和一个直接后继结点。</li><li>现行结构有两种不同的存储结构：顺序存储结构（数组）和链式存储结构（链表）</li><li>线性结构主要包含：数组、队列、链表和栈</li></ul><h3 id="非线性结构"><a href="#非线性结构" class="headerlink" title="非线性结构"></a>非线性结构</h3><blockquote><p>简单地说，非线性结构就是表中各个结点之间具有多个对应关系。如果从数据结构的语言来描述，非线性结构应该包括如下几点：</p></blockquote><ul><li>非线性结构是非空集。</li><li>非线性结构的一个结点可能有多个直接前趋结点和多个直接后继结点</li><li>非线性结构主要包含：二维数组、多维数组、广义表、树结构、图结构</li><li>在实际应用中，数组、广义表、树结构和图结构等数据结构都属于非线性结构</li></ul><h3 id="顺序存储结构"><a href="#顺序存储结构" class="headerlink" title="顺序存储结构"></a>顺序存储结构</h3><blockquote><p>逻辑上相邻的结点存储在物理位置上相邻的存储单元中，结点之间的逻辑关系由存储单元的邻接关系来体现。主要优缺点如下：</p></blockquote><ul><li>节省存储空间：因为分配给数据的存储单元都会用来存储数据，节点的逻辑关系不会占用额外的存储空间。</li><li>随机存储更方便：通过对应的序号就能快速的取出所需要的数据。</li><li>对结点的插入、删除运算时，由于需要移动其他结点，可能存在性能问题。</li><li>在JAVA/C/C++等语言中的数组就是典型的顺序存储结构。</li></ul><h3 id="链式存储结构"><a href="#链式存储结构" class="headerlink" title="链式存储结构"></a>链式存储结构</h3><blockquote><p>它不要求逻辑上相邻的元素在物理位置上也相邻，因此它没有顺序存储结构所具有的弱点，但也同时失去了顺序表可随机存取的优点。其特点主要表现在：</p></blockquote><ul><li>比顺序存储结构的存储密度小(链式存储结构中每个结点都由数据域与指针域两部分组成，相比顺序存储结构增加了存储空间)。</li><li>逻辑上相邻的节点物理上不必相邻。</li><li>插入、删除灵活 (不必移动节点，只要改变节点中的指针)。</li><li>查找节点时链式存储要比顺序存储慢。</li><li>每个节点是由数据域和指针域组成。</li></ul><h2 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h2><blockquote><p>通过将稀疏矩阵类型的二维数组通过技术手段生成的可以节省内存的数据结构，称为稀疏数组。稀疏数组归根结底还是一个数组，只不过对重复值较多的二维数组进行整理，达到降低存储空间的要求。当然，目标数组需要有一定的要求，下面通过实用的例子说明：</p></blockquote><p>在五子棋游戏中，需要对每一个步骤的棋盘进行存储，定义棋盘为8×8的棋盘，0代表无子，1代表黑子，2代表白子。初始化棋盘后，如果使用原始数组保存棋盘数据，至少需要64个存储单元，如下图所示：</p><p><img src="./image/001/001.png" alt="棋盘初始化原始数组数据存储示意图"></p><p>如果使用稀疏数组进行存储这个棋盘，最少只需要3个存储单元就可以完成，如下图所示：</p><p><img src="./image/001/002.png" alt="棋盘初始化稀疏数组数据存储示意图"></p><p>下面说明转化步骤（注意[x,y]中的x,y分别表示行号,列号）：</p><ol><li>稀疏数组[0,0]位置存储的是二维数组中的行数</li><li>稀疏数组[0,1]位置存储的是二维数组中的列数</li><li>稀疏数组[0,2]位置存储的是二维数组中有效数据的个数（按五子棋的逻辑来说，就是有子的点的个数）</li><li>稀疏数组从第1行开始，每行存储的就是每一个数据的位置，其中第1列为行号；第2列为列号；第三列为数据的值</li><li>稀疏数组最小时只需要3个存储单元，最大的时候需要(n+1)*3个存储单元，n表示原始数组中的数据个数，所以稀疏数组通常用来存储数据重复值较多的数据。</li></ol><h3 id="五子棋代码实现"><a href="#五子棋代码实现" class="headerlink" title="五子棋代码实现"></a>五子棋代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> SparseArray;</span><br><span class="line"></span><br><span class="line"><span class="comment">//五子棋棋盘</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChessBoard</span> </span>&#123;</span><br><span class="line">    <span class="comment">//行长度（列数）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> row;</span><br><span class="line">    <span class="comment">//列长度（行数）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> col;</span><br><span class="line">    <span class="comment">//棋子数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pieceCount = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//棋盘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[][] chessboard;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChessBoard</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.row = row;</span><br><span class="line">        <span class="keyword">this</span>.col = col;</span><br><span class="line">        <span class="keyword">this</span>.chessboard = <span class="keyword">new</span> <span class="keyword">int</span>[row][col];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 增加黑子（定义黑子为1）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> row int X轴位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> col int Y轴位置</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addBlack</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> piece = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">this</span>.putPiece(row, col, piece);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 增加白子（定义白子为2）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> row int X轴位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> col int Y轴位置</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addWhite</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> piece = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">this</span>.putPiece(row, col, piece);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 棋盘中，落一个子</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> row   int X轴位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> col   int Y轴位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> piece int 棋子标记（1代表黑子，2代表白子）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">putPiece</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> piece)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.pieceCount &gt;= <span class="keyword">this</span>.row * <span class="keyword">this</span>.col) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"棋盘中棋子已满"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> != piece &amp;&amp; <span class="number">2</span> != piece) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"棋子标记格式有误"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (row &gt; <span class="keyword">this</span>.row) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"不符合规范的列号"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (col &gt; <span class="keyword">this</span>.col) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"不符合规范的行号"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> != <span class="keyword">this</span>.chessboard[row][col]) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"此处位置已经被占用"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.chessboard[row][col] = piece;</span><br><span class="line">        <span class="keyword">this</span>.pieceCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印棋盘</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] rowItem : <span class="keyword">this</span>.chessboard) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> item : rowItem) &#123;</span><br><span class="line">                System.out.printf(<span class="string">"%d \t"</span>, item);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出稀疏数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int[][]</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] toSparseArray() &#123;</span><br><span class="line">        <span class="keyword">int</span>[][] sparseArray = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="keyword">this</span>.pieceCount + <span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">        <span class="comment">//整理稀疏数组</span></span><br><span class="line">        sparseArray[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">this</span>.col;</span><br><span class="line">        sparseArray[<span class="number">0</span>][<span class="number">1</span>] = <span class="keyword">this</span>.row;</span><br><span class="line">        sparseArray[<span class="number">0</span>][<span class="number">2</span>] = <span class="keyword">this</span>.pieceCount;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> row = <span class="number">0</span>; row &lt; <span class="keyword">this</span>.row; row++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> col = <span class="number">0</span>; col &lt; <span class="keyword">this</span>.col; col++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> != <span class="keyword">this</span>.chessboard[row][col]) &#123;</span><br><span class="line">                    sparseArray[index][<span class="number">0</span>] = row;</span><br><span class="line">                    sparseArray[index][<span class="number">1</span>] = col;</span><br><span class="line">                    sparseArray[index][<span class="number">2</span>] = <span class="keyword">this</span>.chessboard[row][col];</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sparseArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印稀疏数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printSparseArray</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] sparseArray = <span class="keyword">this</span>.toSparseArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] items : sparseArray) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> item : items) &#123;</span><br><span class="line">                System.out.printf(<span class="string">"%d \t"</span>, item);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> SparseArray;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ChessBoard chessBoard = <span class="keyword">new</span> ChessBoard(<span class="number">8</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"初始化后的棋盘原始数组数据格式"</span>);</span><br><span class="line">        chessBoard.print();</span><br><span class="line">        System.out.println(<span class="string">"初始化后的棋盘稀疏数组数据格式"</span>);</span><br><span class="line">        chessBoard.printSparseArray();</span><br><span class="line">        System.out.println(<span class="string">"============================"</span>);</span><br><span class="line">        System.out.println(<span class="string">"============================"</span>);</span><br><span class="line">        <span class="comment">//下棋</span></span><br><span class="line">        chessBoard.addBlack(<span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">        chessBoard.addWhite(<span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        chessBoard.addBlack(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">        chessBoard.addWhite(<span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">"下棋中途的棋盘原始数组数据格式"</span>);</span><br><span class="line">        chessBoard.print();</span><br><span class="line">        System.out.println(<span class="string">"下棋中途的棋盘稀疏数组数据格式"</span>);</span><br><span class="line">        chessBoard.printSparseArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果如图所示：</p><p><img src="./image/001/003.png" alt="五子棋代码示例直接结果"></p><h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><blockquote><p>队列是一种特殊的线性表，特殊之处在于它只允许在表的前端（front）进行删除操作，而在表的后端（rear）进行插入操作，和栈一样，队列是一种操作受限制的线性表。进行插入操作的端称为队尾，进行删除操作的端称为队头。</p></blockquote><h3 id="队列的特点"><a href="#队列的特点" class="headerlink" title="队列的特点"></a>队列的特点</h3><ul><li>遵循先进先出的原则，与栈相反，栈遵循先进后出的原则</li><li>队列中通常存在两个指针front和rear，分别称为队头、队尾。数据通常是从队尾入队（插入操作），从队头出队（删除操作）。</li><li>队列可以通过链表、数组进行实现</li><li>队列又被称为先进先出线性表（FIFO—first in first out）</li></ul><h3 id="相关知识点"><a href="#相关知识点" class="headerlink" title="相关知识点"></a>相关知识点</h3><ul><li>下溢现象：当队列为空时，做出队运算产生的溢出现象。</li><li>上溢现象：当队列已满时，做入队运算产生的溢出现象</li><li>假上溢现象：当使用数组进行实现队列时，因为数组的长度为定值，如果不能重复利用已经出队的数据空间，使得队列头、队列尾不断的增加，最后导致虽然队列中的可用数据量未达到队列的最大容量，但是也不能进行入队操作，该现象称为“假上溢”，在实际实现的过程中应该设法避免</li></ul><h3 id="顺序队列"><a href="#顺序队列" class="headerlink" title="顺序队列"></a>顺序队列</h3><blockquote><p>我们都知道在JAVA/C/C++中数组是一种顺序线性表，那么，顺序队列其实就是使用数组进行模拟队列。</p></blockquote><p>在顺序队列中，一般存在两个指针，一个是队头指针front，它指向队头元素；另一个是队尾指针rear，它指向下一个入队元素的存储位置。每次在队尾插入一个元素是，rear增1；每次在队头删除一个元素时，front增1。随着插入和删除操作的进行，队列元素的个数不断变化，队列所占的存储空间也在为队列结构所分配的连续空间中移动。当front=rear时，队列中没有任何元素，称为空队列。当rear增加到指向分配的连续空间之外时，队列无法再插入新元素，但这时往往还有大量可用空间未被占用（假上溢现象），这些空间是已经出队的队列元素曾经占用过得存储单元。</p><p><img src="./image/001/004.png" alt="顺序队列示意图"></p><p>代码实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ArrayQueue;</span><br><span class="line"><span class="comment">//顺序队列</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayQueue</span> </span>&#123;</span><br><span class="line">    <span class="comment">//队头指针，指向的是下一个出队的数据的前一个位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> front = -<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//队尾指针，指向的是下一个入队的数据的前一个位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> rear = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列存储数据的最大值，因为是通过数组模拟队列，所以需要设置队列的最大值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数据存储的位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] data;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayQueue</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">        <span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="keyword">int</span>[maxSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列是否为空</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.rear == <span class="keyword">this</span>.front;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列是否已满</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.rear == (<span class="keyword">this</span>.maxSize - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据入队</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data int 数据值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">inQueue</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.data[++<span class="keyword">this</span>.rear] = data;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据出队</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">outQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"队列为空，出队失败"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.data[++<span class="keyword">this</span>.front];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 偷看一下下一个将要出队的数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">"下一个即将出队的数据为：%d \n"</span>, <span class="keyword">this</span>.data[<span class="keyword">this</span>.front + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印队列数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"下面是队列中的所有数据"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="keyword">this</span>.front + <span class="number">1</span>; i &lt;= <span class="keyword">this</span>.rear; i++) &#123;</span><br><span class="line">            System.out.printf(<span class="string">"%d \t"</span>, <span class="keyword">this</span>.data[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ArrayQueue;</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayQueue arrayQueue = <span class="keyword">new</span> ArrayQueue(<span class="number">10</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">10</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">20</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">30</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        <span class="comment">//数据出队</span></span><br><span class="line">        System.out.println(<span class="string">"队列出队2次"</span>);</span><br><span class="line">        System.out.printf(<span class="string">"%d \t %d \n"</span>, arrayQueue.outQueue(), arrayQueue.outQueue());</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        arrayQueue.inQueue(<span class="number">40</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">50</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">60</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">70</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">80</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">90</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">100</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        <span class="comment">//假溢出现象</span></span><br><span class="line">        arrayQueue.inQueue(<span class="number">110</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果截图</p><p><img src="./image/001/005.png" alt="顺序队列示例代码执行结果"></p><h3 id="循环队列"><a href="#循环队列" class="headerlink" title="循环队列"></a>循环队列</h3><p>在实际使用队列时，为了使队列空间能重复使用（解决假溢出现象），往往对队列的使用方法稍加改进：无论插入或删除，一旦rear指针增1或front指针增1 时超出了所分配的队列空间，就让它指向这片连续空间的起始位置。自己真从MaxSize-1增1变到0，可用取余运算rear%MaxSize和front%MaxSize来实现。这实际上是把队列空间想象成一个环形空间，环形空间中的存储单元循环使用，用这种方法管理的队列也就称为循环队列。值得注意的是，如果使用循环队列，则rear==front将不作为判断是否为空的标志，因为队列是一个环状结构，所以我们需要引入一个变量来确认队列中的数据数量。</p><p><img src="./image/001/006.png" alt="循环队列逻辑示意图"></p><p>代码实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ArrayQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">//循环队列</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircularArrayQueue</span> </span>&#123;</span><br><span class="line">    <span class="comment">//队头指针，指向的是下一个出队的数据的前一个位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> front = -<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//队尾指针，指向的是下一个入队的数据的前一个位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> rear = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列存储数据的最大值，因为是通过数组模拟队列，所以需要设置队列的最大值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数据存储的位置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当前队列中的数据数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CircularArrayQueue</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">        <span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="keyword">int</span>[maxSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列是否为空</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> == <span class="keyword">this</span>.count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列是否已满</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.count == <span class="keyword">this</span>.maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据入队</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data int 数据值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">inQueue</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> index = (<span class="keyword">this</span>.rear + <span class="number">1</span>) % <span class="keyword">this</span>.maxSize;</span><br><span class="line">        <span class="keyword">this</span>.data[index] = data;</span><br><span class="line">        <span class="keyword">this</span>.rear = index;</span><br><span class="line">        <span class="keyword">this</span>.count++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据出队</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">outQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"队列为空，出队失败"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> index = (<span class="keyword">this</span>.front + <span class="number">1</span>) % <span class="keyword">this</span>.maxSize;</span><br><span class="line">        <span class="keyword">int</span> value = <span class="keyword">this</span>.data[index];</span><br><span class="line">        <span class="keyword">this</span>.front = index;</span><br><span class="line">        <span class="keyword">this</span>.count--;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 偷看一下下一个将要出队的数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> index = (<span class="keyword">this</span>.front + <span class="number">1</span>) % <span class="keyword">this</span>.maxSize;</span><br><span class="line">        System.out.printf(<span class="string">"下一个即将出队的数据为：%d \n"</span>, <span class="keyword">this</span>.data[index]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印队列数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"下面是队列中的所有数据"</span>);</span><br><span class="line">        <span class="keyword">int</span> index;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="keyword">this</span>.count; i++) &#123;</span><br><span class="line">            index = (<span class="keyword">this</span>.front + i) % <span class="keyword">this</span>.maxSize;</span><br><span class="line">            System.out.printf(<span class="string">"%d \t"</span>, <span class="keyword">this</span>.data[index]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ArrayQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CircularArrayQueue arrayQueue = <span class="keyword">new</span> CircularArrayQueue(<span class="number">10</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">10</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">20</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">30</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        <span class="comment">//数据出队</span></span><br><span class="line">        System.out.println(<span class="string">"队列出队2次"</span>);</span><br><span class="line">        System.out.printf(<span class="string">"%d \t %d \n"</span>, arrayQueue.outQueue(), arrayQueue.outQueue());</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        arrayQueue.inQueue(<span class="number">40</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">50</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">60</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">70</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">80</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">90</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">100</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">        arrayQueue.inQueue(<span class="number">110</span>);</span><br><span class="line">        arrayQueue.inQueue(<span class="number">120</span>);</span><br><span class="line">        <span class="comment">//数据量超过最大范围</span></span><br><span class="line">        arrayQueue.inQueue(<span class="number">130</span>);</span><br><span class="line">        arrayQueue.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码运行结果：</p><p><img src="./image/001/007.png" alt="循环队列代码执行结果示意图"></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;数据结构（一）之数据结构概述、稀疏数组、队列&quot;&gt;&lt;a href=&quot;#数据结构（一）之数据结构概述、稀疏数组、队列&quot; class=&quot;headerlink&quot; title=&quot;数据结构（一）之数据结构概述、稀疏数组、队列&quot;&gt;&lt;/a&gt;数据结构（一）之数据结构概述、稀疏数组、队列&lt;/h1&gt;&lt;h2 id=&quot;数据结构概述&quot;&gt;&lt;a href=&quot;#数据结构概述&quot; class=&quot;headerlink&quot; title=&quot;数据结构概述&quot;&gt;&lt;/a&gt;数据结构概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;数据结构是计算机存储、组织数据的方式。数据结构是指相互之间存在一种或多种特定关系的数据元素的集合。通常情况下，精心选择的数据结构可以带来更高的运行或者存储效率。数据结构往往同高效的检索算法和索引技术有关。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;定义&quot;&gt;&lt;a href=&quot;#定义&quot; class=&quot;headerlink&quot; title=&quot;定义&quot;&gt;&lt;/a&gt;定义&lt;/h3&gt;&lt;p&gt;数据结构(data structure)是带有结构特性的数据元素的集合，它研究的是数据的逻辑结构和数据的物理结构以及它们之间的相互关系，并对这种结构定义相适应的运算，设计出相应的算法，并确保经过这些运算以后所得到的新结构仍保持原来的结构类型。简而言之，数据结构是相互之间存在一种或多种特定关系的数据元素的集合，即带“结构”的数据元素的集合。“结构”就是指数据元素之间存在的关系，分为逻辑结构和存储结构（也称为物理结构）。&lt;/p&gt;
    
    </summary>
    
    
      <category term="数据结构" scheme="http://blog.tpadmin.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="数据结构" scheme="http://blog.tpadmin.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="队列" scheme="http://blog.tpadmin.top/tags/%E9%98%9F%E5%88%97/"/>
    
      <category term="稀疏数组" scheme="http://blog.tpadmin.top/tags/%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>Linux常用软件编译安装</title>
    <link href="http://blog.tpadmin.top/2020/05/16/Linux%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.tpadmin.top/2020/05/16/Linux%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</id>
    <published>2020-05-16T02:31:02.000Z</published>
    <updated>2020-05-18T03:56:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux常用软件编译安装"><a href="#Linux常用软件编译安装" class="headerlink" title="Linux常用软件编译安装"></a>Linux常用软件编译安装</h1><blockquote><p>Linux常用软件的编译安装步骤，只作为参考，不同版本可能存在偏差，持续更新中…</p></blockquote><h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><h3 id="前置介绍"><a href="#前置介绍" class="headerlink" title="前置介绍"></a>前置介绍</h3><ul><li>软件安装目录：/webserver/app/mysql-5.7.20</li><li>数据存储路径：/webserver/app/mysql-5.7.20/db</li><li>源码存储目录：/webserver/package/</li><li>软件版本：5.7.20</li><li>注意，需要下载含boost的mysql源码</li></ul><a id="more"></a><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><ul><li>安装cmake，安装PHP时也需要使用用来安装libzip</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf cmake-3.17.0-rc2.tar.gz</span><br><span class="line">cd cmake-3.17.0-rc2</span><br><span class="line">./bootstrap</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">echo PATH=$PATH:/usr/local/bin &gt; /etc/profile.d/local.sh</span><br><span class="line">source /etc/profile.d/local.sh</span><br></pre></td></tr></table></figure><ul><li>安装所需依赖</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ ncurses ncurses-devel bison libgcrypt perl python make</span><br></pre></td></tr></table></figure><ul><li>增加用户及组</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /sbin/nologin -d /webserver/app/mysql-5.7.20 mysql</span><br><span class="line">mkdir -p /webserver/app/mysql-5.7.20/db</span><br><span class="line">mkdir /webserver/app/mysql-5.7.20/run</span><br><span class="line">mkdir /webserver/app/mysql-5.7.20/etc</span><br><span class="line">chown -R mysql:mysql /webserver/app/mysql-5.7.20</span><br></pre></td></tr></table></figure><ul><li>安装Mysql，<a href="https://dev.mysql.com/doc/refman/5.7/en/source-configuration-options.html" target="_blank" rel="noopener">参数介绍</a></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/webserver/app/mysql-5.7.20 -DMYSQL_DATADIR=/webserver/app/mysql-5.7.20/db -DDOWNLOAD_BOOST=1 -DWITH_BOOST=/webserver/package/mysql-5.7.20/boost -DSYSCONFDIR=/webserver/package/mysql-5.7.20/boost/etc -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_FEDERATED_STORAGE_ENGINE=1 -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DMYSQL_UNIX_ADDR=/webserver/package/mysql-5.7.20/run/mysql.sock -SYSTEMD_PID_DIR=/webserver/package/mysql-5.7.20/run -DMYSQL_TCP_PORT=3306 -DENABLED_LOCAL_INFILE=1 -DENABLE_DTRACE=0 -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DMYSQL_USER=mysql</span><br><span class="line">make &amp;&amp; make test</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><ul><li>初始化数据库</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/webserver/app/mysql-5.7.20/bin/mysqld --initialize-insecure --user=mysql --basedir=/webserver/app/mysql-5.7.20 --datadir=/webserver/app/mysql-5.7.20/db</span><br></pre></td></tr></table></figure><ul><li>写入配置文件（/etc/my.cnf）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">basedir=/webserver/app/mysql-5.7.20</span><br><span class="line">datadir=/webserver/app/mysql-5.7.20/db</span><br><span class="line">port=3306</span><br><span class="line">socket=/webserver/app/mysql-5.7.20/run/mysql.sock</span><br><span class="line">symbolic-links=0</span><br><span class="line">character-set-server=utf8</span><br><span class="line">pid-file=/webserver/app/mysql-5.7.20/run/mysqld.pid</span><br><span class="line">log-error=/webserver/app/mysql-5.7.20/log/mysqld.log</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">socket=/webserver/app/mysql-5.7.20/run/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">socket=/webserver/app/mysql-5.7.20/run/mysql.sock</span><br></pre></td></tr></table></figure><ul><li>设置服务启动脚本，这里可能出现不能创建文件的错误，请手动创建日志文件（/webserver/app/mysql-5.7.20/log/mysqld.log）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cp ./support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">chkconfig --add mysqld</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start mysqld</span><br><span class="line">chkconfig mysqld on</span><br></pre></td></tr></table></figure><ul><li>配置环境变量(/etc/profile.d/mysql.sh)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:/webserver/app/mysql-5.7.20/bin/</span><br></pre></td></tr></table></figure><ul><li>重载配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/mysql.sh</span><br></pre></td></tr></table></figure><ul><li>修改账号密码、权限等</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root</span><br><span class="line">use mysql;</span><br><span class="line">update user set host = '%' where user = 'root';</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><ul><li>关闭防火墙</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disabled firewalld</span><br></pre></td></tr></table></figure><h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><h3 id="前置介绍-1"><a href="#前置介绍-1" class="headerlink" title="前置介绍"></a>前置介绍</h3><ul><li>软件安装目录： /webserver/app/php-7.3.15/</li><li>软件版本：7.3.15</li><li>准备工具、软件</li></ul><h3 id="安装步骤-1"><a href="#安装步骤-1" class="headerlink" title="安装步骤"></a>安装步骤</h3><ul><li>安装PHP依赖</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel ncurses curl gdbm-devel db4-devel libXpm-devel libX11-devel gd-devel gmp-devel expat-devel xmlrpc-c xmlrpc-c-devel libicu-devel libmcrypt-devel libmemcached-devel gcc-c++ autoconf</span><br></pre></td></tr></table></figure><ul><li>安装libzip，php-7.3对libzip的版本存在要求</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://libzip.org/download/libzip-1.5.1.tar.gz</span><br><span class="line">tar -zxvf libzip-1.5.1.tar.gz</span><br><span class="line">cd libzip-1.5.1</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake …</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><ul><li>创建所需用户</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">groupadd php</span><br><span class="line">useradd -r -g php -s /sbin/nologin -d /webserver/app/php-7.3.15 php</span><br><span class="line">mkdir /webserver/app/php-7.3.15</span><br><span class="line">chown -R php:php /webserver/app/php-7.3.15</span><br><span class="line">tar -zxvf php-7.3.15.tar.gz</span><br><span class="line">cd php-7.3.15</span><br><span class="line">mkdir /webserver/app/php-7.3.15/</span><br></pre></td></tr></table></figure><ul><li>编译安装PHP</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/webserver/app/php-7.3.15 --enable-fpm --with-fpm-user=php --with-fpm-group=php --with-config-file-path=/webserver/app/php-7.3.15/php.ini --disable-rpath --enable-soap --with-libxml-dir --with-xmlrpc --with-openssl --with-mhash --with-pcre-regex --with-zlib --enable-bcmath --with-bz2 --enable-calendar --with-curl --enable-exif --with-pcre-dir --enable-ftp --with-gd --with-openssl-dir --with-jpeg-dir --with-png-dir --with-zlib-dir --with-freetype-dir --enable-gd-jis-conv --with-gettext --with-gmp --with-mhash --enable-mbstring --with-onig --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-zlib-dir --with-readline --enable-shmop --enable-sockets --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-wddx --with-libxml-dir --with-xsl --enable-zip --with-pear</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><ul><li>创建环境变量</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo PATH=$PATH:/webserver/app/php-7.3.15/bin &gt; /etc/profile.d/php.sh</span><br><span class="line">source /etc/profile.d/php.sh</span><br></pre></td></tr></table></figure><ul><li>生成配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cp php.ini-development /webserver/app/php-7.3.15/php.ini</span><br><span class="line">cp /webserver/app/php-7.3.15/etc/php-fpm.conf.default /webserver/app/php-7.3.15/etc/php-fpm.conf</span><br><span class="line">cp /webserver/app/php-7.3.15/etc/php-fpm.d/www.conf.default /webserver/app/php-7.3.15/etc/php-fpm.d/www.conf</span><br><span class="line">cd /webserver/app/php-7.3.15</span><br><span class="line">mkdir run</span><br><span class="line">mkdir logs</span><br><span class="line">vim etc/php-fpm.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 去掉注释</span></span><br><span class="line">pid = /webserver/app/php-7.3.15/run/php-fpm.pid</span><br><span class="line">error_log = /webserver/app/php-7.3.15/logs/php-fpm.log</span><br></pre></td></tr></table></figure><ul><li>加入服务管理（/usr/lib/systemd/system/php-fpm.service）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=php-fpm</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">PIDFile=/webserver/app/php-7.3.15/run/php-fpm.pid</span><br><span class="line">ExecStart=/webserver/app/php-7.3.15/sbin/php-fpm -y /webserver/app/php-7.3.15/etc/php-fpm.conf -c /webserver/app/php-7.3.15/php.ini</span><br><span class="line">ExecReload=/bin/kill -USR2 MAINPIDExecStop=/bin/kill−INTMAINPIDExecStop=/bin/kill−INTMAINPID</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><ul><li>启动php-fpm</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start php-fpm</span><br><span class="line">systemctl enable php-fpm</span><br></pre></td></tr></table></figure><h3 id="错误记录"><a href="#错误记录" class="headerlink" title="错误记录"></a>错误记录</h3><ul><li>error: off_t undefined; check your library configuration</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo '/usr/local/lib64 /usr/local/lib /usr/lib /usr/lib64'&gt;&gt;/etc/ld.so.conf</span><br><span class="line">ldconfig -v</span><br></pre></td></tr></table></figure><h3 id="PHP扩展编译安装"><a href="#PHP扩展编译安装" class="headerlink" title="PHP扩展编译安装"></a>PHP扩展编译安装</h3><h4 id="redis扩展"><a href="#redis扩展" class="headerlink" title="redis扩展"></a>redis扩展</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf redis-5.1.1.tgz</span><br><span class="line">cd redis-5.1.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 需要确定安装了autoconf</span></span><br><span class="line">phpize</span><br><span class="line">./configure --with-php-config=/webserver/app/php-7.3.15/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="mongodb扩展"><a href="#mongodb扩展" class="headerlink" title="mongodb扩展"></a>mongodb扩展</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mongodb-1.7.3.tgz</span><br><span class="line">cd mongodb-1.7.3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 需要确定安装了autoconf</span></span><br><span class="line">phpize</span><br><span class="line">./configure --with-php-config=/webserver/app/php-7.3.15/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><h3 id="前置介绍-2"><a href="#前置介绍-2" class="headerlink" title="前置介绍"></a>前置介绍</h3><ul><li>软件安装目录： /webserver/app/nginx-1.16.1/</li><li>软件版本：1.16.1</li></ul><h3 id="安装步骤-2"><a href="#安装步骤-2" class="headerlink" title="安装步骤"></a>安装步骤</h3><ul><li>安装依赖</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install automake make zlib zlib-devel openssl openssl-devel pcre pcre-devel</span><br></pre></td></tr></table></figure><ul><li>增加用户</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupadd nginx</span><br><span class="line">useradd -r -g nginx -s /sbin/nologin -d /webserver/app/nginx-1.16.1 nginx</span><br><span class="line">mkdir /webserver/app/nginx-1.16.1</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br><span class="line">cd nginx-1.16.1</span><br></pre></td></tr></table></figure><ul><li>编译安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure --user=nginx --group=nginx --prefix=/webserver/app/nginx-1.16.1/ --pid-path=/webserver/app/nginx-1.16.1/run/nginx.pid --lock-path=/webserver/app/nginx-1.16.1/run/nginx.lock  --with-http_stub_status_module --with-http_ssl_module --with-stream --with-http_gzip_static_module --with-http_sub_module</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><ul><li>加入服务(/usr/lib/systemd/system/nginx.service)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit] </span><br><span class="line">Description=nginx - high performance web server</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]                                                                                 </span><br><span class="line">Type=forking                                                                         </span><br><span class="line">PIDFile=/webserver/app/nginx-1.16.1/run/nginx.pid</span><br><span class="line">ExecStartPre=/webserver/app/nginx-1.16.1/sbin/nginx -t -c /webserver/app/nginx-1.16.1/conf/nginx.conf</span><br><span class="line">ExecStart=/webserver/app/nginx-1.16.1/sbin/nginx -c /webserver/app/nginx-1.16.1/conf/nginx.conf </span><br><span class="line">ExecReload=/webserver/app/nginx-1.16.1/sbin/nginx -s reload </span><br><span class="line">ExecStop=/webserver/app/nginx-1.16.1/sbin/nginx -s stop</span><br><span class="line">ExecQuit=/webserver/app/nginx-1.16.1/sbin/nginx -s quit</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><ul><li>启动服务</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Linux常用软件编译安装&quot;&gt;&lt;a href=&quot;#Linux常用软件编译安装&quot; class=&quot;headerlink&quot; title=&quot;Linux常用软件编译安装&quot;&gt;&lt;/a&gt;Linux常用软件编译安装&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Linux常用软件的编译安装步骤，只作为参考，不同版本可能存在偏差，持续更新中…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Mysql&quot;&gt;&lt;a href=&quot;#Mysql&quot; class=&quot;headerlink&quot; title=&quot;Mysql&quot;&gt;&lt;/a&gt;Mysql&lt;/h2&gt;&lt;h3 id=&quot;前置介绍&quot;&gt;&lt;a href=&quot;#前置介绍&quot; class=&quot;headerlink&quot; title=&quot;前置介绍&quot;&gt;&lt;/a&gt;前置介绍&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;软件安装目录：/webserver/app/mysql-5.7.20&lt;/li&gt;
&lt;li&gt;数据存储路径：/webserver/app/mysql-5.7.20/db&lt;/li&gt;
&lt;li&gt;源码存储目录：/webserver/package/&lt;/li&gt;
&lt;li&gt;软件版本：5.7.20&lt;/li&gt;
&lt;li&gt;注意，需要下载含boost的mysql源码&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="技能提升" scheme="http://blog.tpadmin.top/categories/%E6%8A%80%E8%83%BD%E6%8F%90%E5%8D%87/"/>
    
    
      <category term="Linux" scheme="http://blog.tpadmin.top/tags/Linux/"/>
    
      <category term="编译安装" scheme="http://blog.tpadmin.top/tags/%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>Markdown学习笔记</title>
    <link href="http://blog.tpadmin.top/2020/04/09/Markdown%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.tpadmin.top/2020/04/09/Markdown%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-04-09T06:20:47.000Z</published>
    <updated>2020-05-15T10:25:43.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Markdown语法"><a href="#Markdown语法" class="headerlink" title="Markdown语法"></a>Markdown语法</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><blockquote><p>Markdown是一种轻量级的「标记语言」]通常为程序员群体所用，目前它已是全球最大的技术分享网站 GitHub 和技术问答网站 StackOverFlow 的御用书写格式。Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p></blockquote><a id="more"></a><hr><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">##### 六级标题</span><br></pre></td></tr></table></figure><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><h4 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 1st</span><br><span class="line">2. 2nd</span><br><span class="line">3. 3rd</span><br><span class="line">4. 4th</span><br></pre></td></tr></table></figure><h4 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ 列表1</span><br><span class="line">+ 列表2</span><br><span class="line">+ 列表3</span><br><span class="line">+ 列表4</span><br><span class="line"></span><br><span class="line">- 列表1</span><br><span class="line">- 列表2</span><br><span class="line">- 列表3</span><br><span class="line">- 列表4</span><br></pre></td></tr></table></figure><h4 id="子级列表"><a href="#子级列表" class="headerlink" title="子级列表"></a>子级列表</h4><blockquote><p>子级列表只允许是无序列表，子级使用的是TAB键，不是空格</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 1st</span><br><span class="line">    + 1st列表1</span><br><span class="line">        + 1st列表2</span><br><span class="line">                + 1st列表2列表1</span><br><span class="line">                        + 1st列表2列表2</span><br><span class="line">                        1. 2nd</span><br></pre></td></tr></table></figure><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 引用内容</span><br></pre></td></tr></table></figure><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">内容片段1</span><br><span class="line">******************</span><br><span class="line">内容片段2</span><br><span class="line">------------------</span><br><span class="line">内容片段3</span><br></pre></td></tr></table></figure><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![图片文本，非必须](图片的链接地址)</span><br></pre></td></tr></table></figure><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><ul><li>行内式链接</li><li>参考式链接</li><li>自动链接</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;行内式链接</span><br><span class="line">[链接文字](链接地址)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;参考式链接，注意【链接标识】可以标注在任何位置，但建议标注在文章尾</span><br><span class="line">[链接文字](链接标识)</span><br><span class="line">[链接标识]：链接地址</span><br><span class="line"></span><br><span class="line">[链接文字](1)</span><br><span class="line">[链接文字](2)</span><br><span class="line">[1]：链接地址</span><br><span class="line">[2]：链接地址</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;自动连接</span><br><span class="line">&lt;http:&#x2F;&#x2F;www.baidu.com&gt;</span><br></pre></td></tr></table></figure><h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;行内代码块</span><br><span class="line">&#96;this is code&#96;</span><br><span class="line">&#x2F;&#x2F;多行代码块</span><br><span class="line">使用【&#96;&#96;&#96;】在独立行进行包装</span><br></pre></td></tr></table></figure><h3 id="字体样式"><a href="#字体样式" class="headerlink" title="字体样式"></a>字体样式</h3><ul><li>字体加粗</li><li>斜体</li><li>斜体加粗</li><li>删除线</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**字体加粗**</span><br><span class="line">*斜体*</span><br><span class="line">***斜体加粗***</span><br><span class="line">~~加删除线的文字~~</span><br></pre></td></tr></table></figure><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">表头|表头|表头</span><br><span class="line">---|:--:|---:</span><br><span class="line">内容|内容|内容</span><br><span class="line">内容|内容|内容</span><br></pre></td></tr></table></figure><hr><h2 id="进阶语法"><a href="#进阶语法" class="headerlink" title="进阶语法"></a>进阶语法</h2><blockquote><p>进阶语法不同于基本语法，进阶语法不适用与所有场景，请谨慎使用</p></blockquote><h3 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$\color&#123;red&#125;&#123;红色字&#125;$\</span><br><span class="line">$\color&#123;#FF0000&#125;&#123;红色字&#125;$</span><br><span class="line">$\color&#123;rgb(255,255,0)&#125;&#123;黄色字&#125;$</span><br></pre></td></tr></table></figure><h3 id="内容目录"><a href="#内容目录" class="headerlink" title="内容目录"></a>内容目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[TOC]</span><br></pre></td></tr></table></figure><h3 id="注脚"><a href="#注脚" class="headerlink" title="注脚"></a>注脚</h3><blockquote><p>暂未发现那个编辑器支持，慎用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[^keyword]</span><br></pre></td></tr></table></figure><h3 id="多选框"><a href="#多选框" class="headerlink" title="多选框"></a>多选框</h3><blockquote><p>简书不支持此标记语法</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- [ ] 未选中多选框, 需要注意【- 】后面及【[ ]】中间的空格</span><br><span class="line">- [X] 已选中多选框, X大写小写都可以</span><br></pre></td></tr></table></figure><h3 id="注脚-1"><a href="#注脚-1" class="headerlink" title="注脚"></a>注脚</h3><blockquote><p>在需要添加注脚的文字后加上脚注名： [^注脚名] 。 然后在文本的任意位置(一般在最后)添加脚注，需要注意的是，很多编辑器不支持。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用 Markdown[^1]可以效率的书写文档, 直接转换成 HTML[^2], 你可以使用 Typora[^T] 编辑器进行书写。</span><br><span class="line">[^1]:Markdown是一种纯文本标记语言</span><br><span class="line">[^2]:HyperText Markup Language 超文本标记语言</span><br><span class="line">[^T]:NEW WAY TO READ &amp; WRITE MARKDOWN.</span><br></pre></td></tr></table></figure><h3 id="LaTeX公式"><a href="#LaTeX公式" class="headerlink" title="LaTeX公式"></a>LaTeX公式</h3><p>语法参考网址：<a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="noopener">https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference</a></p><h3 id="各种流程图"><a href="#各种流程图" class="headerlink" title="各种流程图"></a>各种流程图</h3><ul><li>基本流程图：<a href="http://flowchart.js.org/" target="_blank" rel="noopener">http://flowchart.js.org/</a></li><li>Mermaid流程图：<a href="https://knsv.github.io/mermaid/" target="_blank" rel="noopener">https://knsv.github.io/mermaid/</a></li><li>序列图：<a href="https://link.jianshu.com/?t=https://bramp.github.io/js-sequence-diagrams/" target="_blank" rel="noopener">https://link.jianshu.com/?t=https://bramp.github.io/js-sequence-diagrams/</a></li><li>甘特图：<a href="https://link.jianshu.com/?t=https://knsv.github.io/mermaid/#configuration41" target="_blank" rel="noopener">https://link.jianshu.com/?t=https://knsv.github.io/mermaid/#configuration41</a></li></ul><h1 id="自定义Markdown的样式表"><a href="#自定义Markdown的样式表" class="headerlink" title="自定义Markdown的样式表"></a>自定义Markdown的样式表</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family </span>: <span class="string">"PingFang SC"</span>, <span class="string">"Hiragino Sans GB"</span>, <span class="string">"Helvetica Neue"</span>, <span class="string">"Microsoft Yahei"</span>, <span class="string">"WenQuanYi Micro Hei"</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">width      </span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">margin     </span>: <span class="number">20px</span> auto;</span><br><span class="line">    <span class="attribute">min-height </span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">40px</span>);</span><br><span class="line">    <span class="attribute">font-size  </span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">color      </span>: <span class="number">#333333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*标题*/</span></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">width          </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">color          </span>: <span class="number">#0077BB</span>;</span><br><span class="line">    <span class="attribute">display        </span>: block;</span><br><span class="line">    <span class="attribute">font-size      </span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">font-weight    </span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">height         </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">line-height    </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin         </span>: <span class="number">50px</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-rendering </span>: optimizelegibility;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">width          </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">color          </span>: <span class="number">#0077BB</span>;</span><br><span class="line">    <span class="attribute">display        </span>: block;</span><br><span class="line">    <span class="attribute">font-size      </span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">font-weight    </span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">height         </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">line-height    </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin         </span>: <span class="number">35px</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-rendering </span>: optimizelegibility;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">margin      </span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-size   </span>: <span class="number">21px</span>;</span><br><span class="line">    <span class="attribute">line-height </span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">font-weight </span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">color       </span>: <span class="number">#0077BB</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">font-size   </span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">margin      </span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-weight </span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">line-height </span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color       </span>: <span class="number">#0077BB</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">font-size   </span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">margin      </span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-weight </span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">line-height </span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color       </span>: <span class="number">#0077BB</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*引用*/</span></span><br><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">padding           </span>: <span class="number">10px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-left-style </span>: solid;</span><br><span class="line">    <span class="attribute">border-left-width </span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin            </span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-color      </span>: <span class="number">#D6DBDF</span>;</span><br><span class="line">    <span class="attribute">background        </span>: none repeat scroll <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">128</span>, <span class="number">153</span>, .<span class="number">05</span>);</span><br><span class="line">    <span class="attribute">line-height       </span>: <span class="number">26px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*普通段落*/</span></span><br><span class="line"><span class="selector-tag">body</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size </span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin    </span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*列表*/</span></span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">padding </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin  </span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">line-height </span>: <span class="number">27px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*图片*/</span></span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display        </span>: block;</span><br><span class="line">    <span class="attribute">height         </span>: auto;</span><br><span class="line">    <span class="attribute">max-width      </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">vertical-align </span>: middle;</span><br><span class="line">    <span class="attribute">cursor         </span>: pointer;</span><br><span class="line">    <span class="attribute">margin         </span>: <span class="number">10px</span> auto <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文字样式*/</span></span><br><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight </span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">em</span> &#123;</span><br><span class="line">    <span class="attribute">font-style </span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*链接地址*/</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color  </span>: <span class="number">#5BA4E5</span>;</span><br><span class="line">    <span class="attribute">margin </span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color           </span>: <span class="number">#005580</span>;</span><br><span class="line">    <span class="attribute">text-decoration </span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">outline </span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*分割线*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">hr</span> &#123;</span><br><span class="line">    <span class="attribute">border        </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-bottom </span>: <span class="number">1px</span> dashed <span class="number">#CFCFCF</span>;</span><br><span class="line">    <span class="attribute">margin        </span>: <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*表格*/</span></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">    <span class="attribute">width          </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-bottom  </span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border         </span>: <span class="number">1px</span> solid <span class="number">#DDDDDD</span>;</span><br><span class="line">    <span class="attribute">border-left    </span>: none;</span><br><span class="line">    <span class="attribute">border-bottom  </span>: none;</span><br><span class="line">    <span class="attribute">border-radius  </span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-spacing </span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">table-layout   </span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> &gt; <span class="selector-tag">tbody</span> &gt; <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(2n+1)</span> &#123;</span><br><span class="line">    <span class="attribute">background </span>: <span class="number">#F5F5F5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> &gt; <span class="selector-tag">tbody</span> &gt; <span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background </span>: <span class="number">#DDDDDD</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">th</span>, <span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span><br><span class="line">    <span class="attribute">border-left   </span>: <span class="number">1px</span> solid <span class="number">#DDDDDD</span>;</span><br><span class="line">    <span class="attribute">border-bottom </span>: <span class="number">1px</span> solid <span class="number">#DDDDDD</span>;</span><br><span class="line">    <span class="attribute">background    </span>: none;</span><br><span class="line">    <span class="attribute">padding       </span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align </span>: middle;</span><br><span class="line">    <span class="attribute">font-weight    </span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*代码高亮*/</span></span><br><span class="line"><span class="selector-tag">pre</span> &#123;</span><br><span class="line">    <span class="attribute">width              </span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow-x         </span>: auto;</span><br><span class="line">    <span class="attribute">scrollbar-width    </span>: none;</span><br><span class="line">    <span class="attribute">-ms-overflow-style </span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">    <span class="attribute">display </span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span>, <span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight           </span>: normal;</span><br><span class="line">    <span class="attribute">display               </span>: block;</span><br><span class="line">    <span class="attribute">padding               </span>: <span class="number">9.5px</span>;</span><br><span class="line">    <span class="attribute">box-sizing            </span>: border-box;</span><br><span class="line">    <span class="attribute">line-height           </span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">word-break            </span>: break-all;</span><br><span class="line">    <span class="attribute">word-wrap             </span>: break-word;</span><br><span class="line">    <span class="attribute">background-color      </span>: <span class="number">#2B2B2B</span>;</span><br><span class="line">    <span class="attribute">-webkit-border-radius </span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">-moz-border-radius    </span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-radius         </span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">font-size             </span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin                </span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">font-family           </span>: <span class="string">"Consolas"</span>;</span><br><span class="line">    <span class="attribute">color                 </span>: <span class="built_in">rgba</span>(<span class="number">230</span>, <span class="number">225</span>, <span class="number">220</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*JAVA代码内容*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*注释*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-comment</span> &#123;</span><br><span class="line">    <span class="attribute">font-style </span>: italic;</span><br><span class="line">    <span class="attribute">color      </span>: <span class="built_in">rgba</span>(<span class="number">188</span>, <span class="number">147</span>, <span class="number">88</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-annotation</span> &#123;</span><br><span class="line">    <span class="attribute">font-style </span>: italic;</span><br><span class="line">    <span class="attribute">color      </span>: <span class="built_in">rgba</span>(<span class="number">188</span>, <span class="number">147</span>, <span class="number">88</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-javadoc</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*关键字*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-keyword</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*null、true、false*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-literal</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*类名、方法名*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-title</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">208</span>, <span class="number">208</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*调用方法*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-function</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">198</span>, <span class="number">109</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*数值型*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-number</span>, <span class="selector-tag">pre</span> <span class="selector-class">.hljs-string</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">165</span>, <span class="number">194</span>, <span class="number">97</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*CSS代码样式*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*各种选择器*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-selector-tag</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-selector-class</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-selector-id</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-selector-pseudo</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*属性名*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-attribute</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">208</span>, <span class="number">208</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-attr</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">208</span>, <span class="number">208</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*函数*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-built_in</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">218</span>, <span class="number">73</span>, <span class="number">57</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*shell*/</span></span><br><span class="line"><span class="comment">/*meta*/</span></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-meta</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-variable</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">208</span>, <span class="number">208</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*HTML*/</span></span><br><span class="line"><span class="comment">/*变量*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-tag</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">208</span>, <span class="number">208</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.hljs-name</span> &#123;</span><br><span class="line">    <span class="attribute">color </span>: <span class="built_in">rgba</span>(<span class="number">204</span>, <span class="number">120</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Markdown语法&quot;&gt;&lt;a href=&quot;#Markdown语法&quot; class=&quot;headerlink&quot; title=&quot;Markdown语法&quot;&gt;&lt;/a&gt;Markdown语法&lt;/h1&gt;&lt;h2 id=&quot;基本介绍&quot;&gt;&lt;a href=&quot;#基本介绍&quot; class=&quot;headerlink&quot; title=&quot;基本介绍&quot;&gt;&lt;/a&gt;基本介绍&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Markdown是一种轻量级的「标记语言」]通常为程序员群体所用，目前它已是全球最大的技术分享网站 GitHub 和技术问答网站 StackOverFlow 的御用书写格式。Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="初学笔记" scheme="http://blog.tpadmin.top/categories/%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Markdown" scheme="http://blog.tpadmin.top/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB学习笔记</title>
    <link href="http://blog.tpadmin.top/2019/12/20/MonogDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.tpadmin.top/2019/12/20/MonogDB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2019-12-20T04:05:08.000Z</published>
    <updated>2020-05-18T05:25:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MongoDB学习笔记"><a href="#MongoDB学习笔记" class="headerlink" title="MongoDB学习笔记"></a>MongoDB学习笔记</h1><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示数据库列表（注意，无集合的数据库不显示）</span></span><br><span class="line"><span class="keyword">show</span> dbs;</span><br><span class="line"><span class="comment">-- 显示当前正在使用的数据库</span></span><br><span class="line">db;</span><br><span class="line"><span class="comment">-- 如果存在，则切换至数据库，如果不存在，创建后切换至数据库</span></span><br><span class="line"><span class="keyword">use</span> dbname;</span><br><span class="line"><span class="comment">-- 展示当前库中的集合列表</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"><span class="comment">-- 同上</span></span><br><span class="line"><span class="keyword">show</span> collections;</span><br><span class="line"><span class="comment">-- 删除当前数据库</span></span><br><span class="line">db.dropDatabase();</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="集合操作"><a href="#集合操作" class="headerlink" title="集合操作"></a>集合操作</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库 name:数据库名称 options：选项</span></span><br><span class="line"><span class="comment">-- db.cretaeCollection(name, options);</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">options : &#123;</span></span><br><span class="line"><span class="comment">  capped : false|true 是否限制集合大小</span></span><br><span class="line"><span class="comment">  size : number 当文档达到上限时，会覆盖之前的数据，单位为字节</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">db.createCollection('collection_name', &#123;capped: true, size : 100&#125;);</span><br><span class="line"><span class="comment">-- 删除当前库的collection_name集合</span></span><br><span class="line">db.collection_name.drop();</span><br></pre></td></tr></table></figure><h2 id="文档简单操作"><a href="#文档简单操作" class="headerlink" title="文档简单操作"></a>文档简单操作</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入数据，如果不存在collection_name的集合，则会自动创建</span></span><br><span class="line">db.collection_name.insert(&#123;<span class="string">"name"</span>:<span class="string">"renling"</span>&#125;);</span><br><span class="line"><span class="comment">-- 查询collection_name中的所有数据，pertty将会格式化显示</span></span><br><span class="line">db.collection_name.find();</span><br><span class="line">db.collection_name.find().pertty();</span><br><span class="line"><span class="comment">-- 全量修改数据，会将匹配到的整体JSON替换为data_json数据</span></span><br><span class="line">db.collection_name.update(where_json, data_json);</span><br><span class="line"><span class="comment">-- 非全量修改数据</span></span><br><span class="line">db.collection_name.update(where_json, &#123;<span class="string">'$set'</span> : data_json&#125;);</span><br><span class="line"><span class="comment">-- 删除数据</span></span><br><span class="line">db.collection_name.remove(where_json);</span><br></pre></td></tr></table></figure><h2 id="高级操作（where-json部分）"><a href="#高级操作（where-json部分）" class="headerlink" title="高级操作（where_json部分）"></a>高级操作（where_json部分）</h2><h3 id="比较查询"><a href="#比较查询" class="headerlink" title="比较查询"></a>比较查询</h3><ul><li>等于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"name":"xiaogang.cui"&#125;</span><br></pre></td></tr></table></figure><ul><li>大于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$gt':15&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>小于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$lt':15&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>大于等于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$gte':15&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>小于等于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$lte':15&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>不等于运算符</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$ne':15&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>组合操作</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$gt':15,'$lt':22&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>IN|NOT IN 查询</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;'$in', [11,23,45]&#125;&#125;</span><br><span class="line">&#123;"age":&#123;'$nin', [11,23,45]&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>size 查询(前提是data是个对象或者数组)</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- data有12个元素</span></span><br><span class="line">&#123;"data":&#123;'$size' : 12&#125;&#125;</span><br><span class="line"><span class="comment">-- data的元素个数大于4个</span></span><br><span class="line">&#123;"data":&#123;'$size':&#123;'$gt':4&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>是否存在    //true 表示存在 false 表示不存在</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;$exists:true&#125;&#125;</span><br><span class="line">&#123;"age":&#123;$exists:true, $eq:12&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>OR 条件</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;$or: [&#123;"age":18&#125;, &#123;"name":"xiaogang.cui"&#125;]&#125;</span><br><span class="line">&#123;$or: [&#123;"age":&#123;$gt:20&#125;&#125;, &#123;"age":&#123;$lt:18&#125;&#125;]&#125;</span><br></pre></td></tr></table></figure><ul><li>正则匹配(模糊查询)</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;"age":&#123;$regex:/^\d+$/&#125;&#125;</span><br><span class="line">&#123;"name":/^\.*\d+$/&#125;</span><br></pre></td></tr></table></figure><h2 id="高级操作（其他操作）"><a href="#高级操作（其他操作）" class="headerlink" title="高级操作（其他操作）"></a>高级操作（其他操作）</h2><h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.find().sort(&#123;"age":1, "time":-1&#125;);</span><br></pre></td></tr></table></figure><h3 id="限制输出"><a href="#限制输出" class="headerlink" title="限制输出"></a>限制输出</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 只取前10条数据 = limit 10</span></span><br><span class="line">db.collection_name.find().limit(10);</span><br><span class="line"><span class="comment">-- 取10后的前10条 = limit 10,10</span></span><br><span class="line">db.collection_name.find().skip(10).limit(10);</span><br></pre></td></tr></table></figure><h2 id="MongoDB的数据类型"><a href="#MongoDB的数据类型" class="headerlink" title="MongoDB的数据类型"></a>MongoDB的数据类型</h2><table><thead><tr><th align="center">–</th><th align="left">–</th></tr></thead><tbody><tr><td align="center">ObjectID</td><td align="left">文档ID，是一个12字节的十六进制数</td></tr><tr><td align="center">String</td><td align="left">字符串，必须是有效的UTF-8</td></tr><tr><td align="center">Boolean</td><td align="left">布尔</td></tr><tr><td align="center">Integer</td><td align="left">整形，可以使32或64位，取决于服务器</td></tr><tr><td align="center">Double</td><td align="left">浮点型</td></tr><tr><td align="center">Arrays</td><td align="left">数组或列表</td></tr><tr><td align="center">Object</td><td align="left">嵌入式的文档</td></tr><tr><td align="center">Null</td><td align="left"></td></tr><tr><td align="center">Timestamp</td><td align="left">时间戳</td></tr><tr><td align="center">Date</td><td align="left">存储当前的日期或时间的UNIX时间格式</td></tr></tbody></table><h2 id="聚合命令"><a href="#聚合命令" class="headerlink" title="聚合命令"></a>聚合命令</h2><blockquote><p>语法：db.collection_name.aggregate([{“管道符”:{表达式}}])</p></blockquote><h3 id="常用管道"><a href="#常用管道" class="headerlink" title="常用管道"></a>常用管道</h3><table><thead><tr><th align="center">–</th><th align="left">–</th></tr></thead><tbody><tr><td align="center">$group</td><td align="left">讲集合中的文档进行分组，可用于统计结果</td></tr><tr><td align="center">$match</td><td align="left">过滤数据，只输出符合条件的文档</td></tr><tr><td align="center">$project</td><td align="left">修改输入文档的结构，如：重命名、增加、删除、创建计算结果等</td></tr><tr><td align="center">$sort</td><td align="left">将输入文档排序后输出</td></tr><tr><td align="center">$limit</td><td align="left">限制聚合管道返回的文档数</td></tr><tr><td align="center">$skip</td><td align="left">跳过指定数量的文档</td></tr><tr><td align="center">$unwind</td><td align="left">将数组类型的字段进行拆分</td></tr></tbody></table><h3 id="常用表达式"><a href="#常用表达式" class="headerlink" title="常用表达式"></a>常用表达式</h3><table><thead><tr><th align="center">–</th><th align="center">–</th></tr></thead><tbody><tr><td align="center">$sum</td><td align="center">计算综合， 需要注意的是{$sum:1} 相当于求得数据的数量 count</td></tr><tr><td align="center">$avg</td><td align="center">计算平均值</td></tr><tr><td align="center">$min</td><td align="center">获取最小值</td></tr><tr><td align="center">$max</td><td align="center">获取最大值</td></tr><tr><td align="center">$push</td><td align="center">在结果文档中插入到一个数组中</td></tr><tr><td align="center">$first</td><td align="center">根据资源文档的排序获取第一个文档数据</td></tr><tr><td align="center">$last</td><td align="center">根据资源文档的排序获取最后一个文档数据</td></tr><tr><td align="center">–</td><td align="center">–</td></tr></tbody></table><h3 id="核心语法"><a href="#核心语法" class="headerlink" title="核心语法"></a>核心语法</h3><p>db.collection_name.aggregate([<br>    {管道1: {表达式1}},<br>    {管道2: {表达式2}},<br>    {管道3: {表达式3}}<br>]);</p><ul><li>$limit  限制输出的数据条数</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.aggregate(&#123;$limit:3&#125;);</span><br></pre></td></tr></table></figure><ul><li>分组查询（特殊）</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- $group 分组查询</span></span><br><span class="line">db.collection_name.aggregate(</span><br><span class="line">    &#123;$group: </span><br><span class="line">        &#123;</span><br><span class="line">            _id : '$字段名',        //根据某个字段进行分组 group by field</span><br><span class="line">            别名 : &#123;聚合函数:'$字段名'&#125;    //计算的数据</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>分组查询年龄之和</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.aggregate(</span><br><span class="line">    &#123;$group: &#123;</span><br><span class="line">        _id:'$name',</span><br><span class="line">        'total_age':&#123;$sum:'$age'&#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>_id 为null代表不分组</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.aggregate(</span><br><span class="line">    &#123;$group: &#123;</span><br><span class="line">        _id:null,</span><br><span class="line">        "平均年龄":&#123;$avg:'$age'&#125;,</span><br><span class="line">        "数据条数":&#123;$sum:1&#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>$push 进行拼接操作</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.aggregate(</span><br><span class="line">    &#123;$group: &#123;</span><br><span class="line">        _id : '$sex',</span><br><span class="line">        'count' : &#123;$sum:1&#125;,</span><br><span class="line">        "名单" : &#123;$push:'$name'&#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>$first $last 按照分组排序获取第一、最后的数据</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.aggregate(&#123;</span><br><span class="line">    $group:&#123;</span><br><span class="line">        _id:'$sex',</span><br><span class="line">        "小组第一个人":&#123;$first:'$name'&#125;,</span><br><span class="line">        "小组最后一个人":&#123;$last:'$name'&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="其他管道应用"><a href="#其他管道应用" class="headerlink" title="其他管道应用"></a>其他管道应用</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 年龄大于30的数据  $match 过滤数据 </span></span><br><span class="line">db.collection_name.aggregate(&#123;</span><br><span class="line">   $match:&#123;"age":&#123;$gt:30&#125;&#125; </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对过滤后的数据进行分组</span></span><br><span class="line">db.collection_name.aggregate([</span><br><span class="line">    &#123;$match:&#123;"age":&#123;$gt:30&#125;&#125;&#125;,</span><br><span class="line">    &#123;$group:&#123;_id:null, 'count':&#123;$sum:1&#125;&#125;&#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 限定字段的管道符 $project(//1 显示 0 不显示)</span></span><br><span class="line">db.collection_name.aggregate(&#123;</span><br><span class="line">    $project:&#123;"_id":0, "name":1,"sex":0,"age":1&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 排序 $sort(按年龄从小到大)</span></span><br><span class="line">db.collection_name.aggregate(&#123;</span><br><span class="line">    $sort: &#123;</span><br><span class="line">        "age":1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 限制输出 $limit $skip</span></span><br><span class="line">db.collection_name.aggregate([</span><br><span class="line">    &#123;$sort:&#123;"age":1&#125;&#125;,</span><br><span class="line">    &#123;$limit:10&#125;,</span><br><span class="line">    &#123;$skip:10&#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 数组进行拆分 $unwind</span></span><br><span class="line"><span class="comment">-- 只针对数组有作用，拆分后，1条数据将会变为数组个数的数据条数</span></span><br><span class="line">db.users.aggregate([</span><br><span class="line">    &#123;$match:&#123;"data":&#123;$exists:true&#125;&#125;&#125;,</span><br><span class="line">    &#123;$unwind:"$data"&#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h2 id="数据库安全"><a href="#数据库安全" class="headerlink" title="数据库安全"></a>数据库安全</h2><ul><li>首先以无密码形式登录</li><li>创建管理员密码，<code>use admin;</code></li><li>添加一个超级管理员<code>db.createUser({user:&quot;admin&quot;,pwd:&quot;password&quot;,roles:[&quot;root&quot;]});</code></li><li>验证密码(必须在admin库下才能正常执行)<code>db.auth(&#39;admin&#39;, &#39;password&#39;);</code></li><li>重启mongodb服务（不单单只是重启，如果安装了windows的服务，需要重新安装windows服务）</li><li>关闭mongo服务，然后重新启动<code>mongod --dbpath &quot;d:\mongodb\db\&quot; --logpath &quot;d:\mongo\log\mongo.log&quot; --auth</code></li><li>注意的点：<ul><li>如果安装了MongoDB的windows服务，需要先卸载windows服务</li><li>需要确定windows服务的名称是否为mongodb<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">net stop mongodb</span><br><span class="line">sc delete mongodb</span><br><span class="line">//注意，开启了验证用户身份(--auth)匿名用户仍然可以登录，但是不能查询、操作任何数据。</span><br><span class="line">mongod --dbpath "d:\mongodb\db\" --logpath "d:\mongo\log\mongo.log" --install --serviceName "MongoDB" --auth</span><br><span class="line">//为某个库添加指定的管理员，添加的管理员只能访问某个库</span><br><span class="line">db.createUser(&#123;user:"root",pwd:"root", roles:[role:"dbOwner", db:"db_name"]&#125;);</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;MongoDB学习笔记&quot;&gt;&lt;a href=&quot;#MongoDB学习笔记&quot; class=&quot;headerlink&quot; title=&quot;MongoDB学习笔记&quot;&gt;&lt;/a&gt;MongoDB学习笔记&lt;/h1&gt;&lt;h2 id=&quot;数据库操作&quot;&gt;&lt;a href=&quot;#数据库操作&quot; class=&quot;headerlink&quot; title=&quot;数据库操作&quot;&gt;&lt;/a&gt;数据库操作&lt;/h2&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 显示数据库列表（注意，无集合的数据库不显示）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;show&lt;/span&gt; dbs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 显示当前正在使用的数据库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 如果存在，则切换至数据库，如果不存在，创建后切换至数据库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; dbname;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 展示当前库中的集合列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;show&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;tables&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 同上&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;show&lt;/span&gt; collections;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 删除当前数据库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.dropDatabase();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="初学笔记" scheme="http://blog.tpadmin.top/categories/%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="MongoDB" scheme="http://blog.tpadmin.top/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>跨域访问解决方案</title>
    <link href="http://blog.tpadmin.top/2018/08/23/%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88(CORS)/"/>
    <id>http://blog.tpadmin.top/2018/08/23/%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88(CORS)/</id>
    <published>2018-08-23T02:31:02.000Z</published>
    <updated>2020-05-18T07:31:30.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="跨域访问解决方案"><a href="#跨域访问解决方案" class="headerlink" title="跨域访问解决方案"></a>跨域访问解决方案</h1><h2 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h2><h3 id="前后端分离的好处"><a href="#前后端分离的好处" class="headerlink" title="前后端分离的好处"></a>前后端分离的好处</h3><blockquote><p>最大的好处就是前端JS可以做很大部分的数据处理工作，对服务器的压力减小到最小。<br>后台错误不会直接反映到前台，错误接秒较为友好。<br>由于后台是很难去探知前台页面的分布情况，而这又是JS的强项，而JS又是无法独立和服务器进行通讯的。所以单单用后台去控制整体页面，又或者只靠JS完成效果，都会难度加大，前后台各尽其职可以最大程度的减少开发难度。</p></blockquote><h3 id="前后端分离的模式"><a href="#前后端分离的模式" class="headerlink" title="前后端分离的模式"></a>前后端分离的模式</h3><blockquote><p>第一种只是单纯的前后端分离，实在物理层面上的，将View层的任务分配给前端，Controller和Model层给后端，这就存在一个问题，就是后端的同事需要去关注前端的展示逻辑、而前端只要存在变化，后端的数据处理需要做相应的改变。<br>第二种是基于职责层面上的分离，将View和Controller层分配的前端，后端只处理Model和业务处理，这就需要Controller使用Node.js，M-V-C对应的是JAVA/PHP-JAVASCRIPT、HTML、CSS-Node.js。</p></blockquote><h3 id="跨域问题存在的原因"><a href="#跨域问题存在的原因" class="headerlink" title="跨域问题存在的原因"></a>跨域问题存在的原因</h3><blockquote><p>随着前后端分离技术的越来越盛行，跨域问题也逐渐凸显了出来。跨域问题的根本原因：因为浏览器收到同源策略的限制，当前域名的js只能读取同域下的窗口属性。什么叫做同源策略？就是不同的域名, 不同端口, 不同的协议不允许共享资源的，保障浏览器安全。同源策略是针对浏览器设置的门槛。如果绕过浏览就能实现跨域，所以说早期的跨域都是打着安全路数的擦边球，都可以认为是 hack 处理。这一段是我从别的地方cp过来的，大家将就着看吧。</p></blockquote><p>这里要注意的是，只有访问类型为xhr（XMLHttpRequest)的才会出现跨域。那么，我们如何处理跨域访问的问题呢？方法有三：</p><ol><li>修改浏览器的设置</li><li>修改请求的方式：jsonp</li><li>CORS</li></ol><a id="more"></a><h2 id="修改浏览器配置解决跨域"><a href="#修改浏览器配置解决跨域" class="headerlink" title="修改浏览器配置解决跨域"></a>修改浏览器配置解决跨域</h2><p>以Google Chrome为例，浏览器以–disable-web-security–user-data-dir模式打开即可。<br>右键点击浏览器快捷方式，在目标中输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;C:\ProgramFiles(x86)\Google\Chrome\Application\chrome.exe&quot; --disable-web-security--user-data-dir</span><br></pre></td></tr></table></figure><p>代码即可解决（不推荐）。</p><h2 id="使用jsonp解决跨域"><a href="#使用jsonp解决跨域" class="headerlink" title="使用jsonp解决跨域"></a>使用jsonp解决跨域</h2><ul><li>JQuery中的正常AJAX请求代码片段</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#demo1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url : <span class="string">'http://www.tpadmin.top/Index/Test/crossDomain'</span>,</span><br><span class="line">        data : &#123;&#125;,</span><br><span class="line">        type : <span class="string">'get'</span>,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://127.0.0.1' is therefore not allowed access. 在执行时候报出的错误，这代表了跨域错误</span></span><br><span class="line">            alert(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="./image/002/001.png" alt="跨域访问错误"></p><ul><li>JQuery中的使用JSONP的AJAX请求代码：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#demo2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url : <span class="string">'http://www.tpadmin.top/Index/Test/crossDomain'</span>,</span><br><span class="line">        data : &#123;&#125;,</span><br><span class="line">        type : <span class="string">'get'</span>,</span><br><span class="line">        dataType : <span class="string">'jsonp'</span>,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="./image/002/002.png" alt="jsonp跨域访问错误"></p><p>这时候我们看到 请求的网址自动变成了<code>http://www.tpadmin.top/Index/Test/crossDomain?callback=jQuery331015214102388989237_1534993962395&amp;_=1534993962396</code>，这是为什么呢？原来由于跨域访问的只限制xhr类型的请求（上文中已经说了），所以js中就利用了这一特点，让服务端不在返回的是一个JSON格式的数据，而是返回一段JS代码，将JSON的数据以参数的形式传递到这个函数中，而函数的名称就是callback参数的值，所以我们还需要修改服务端的代码，代码如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $callback = <span class="keyword">isset</span>($_GET[<span class="string">'callback'</span>])?$_GET[<span class="string">'callback'</span>]:<span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>($callback)) &#123;</span><br><span class="line">        $arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line">        $data = json_encode($arr);</span><br><span class="line">        <span class="keyword">exit</span>($callback . <span class="string">'('</span> . $data . <span class="string">')'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="./image/002/003.png" alt="jsonp解决跨域访问"></p><p>OK，现在问题解决了，但是JSONP存在着诸多限制，下面将列出两个个我知道的：</p><ul><li>JSONP只支持GET请求，什么？你要提交表单，sorry，此路不通</li><li>它只支持跨域HTTP请求</li></ul><p>虽然只有两个，但是让很多人不得不放弃它，所以出现了下面的解决办法。</p><h2 id="CORS解决跨域"><a href="#CORS解决跨域" class="headerlink" title="CORS解决跨域"></a>CORS解决跨域</h2><blockquote><p>回归问题本质，跨域问题为什么会产生，上面已经说了，是由于浏览器的限制，那么在执行过程中有什么不同，下面两张度分析一下（主要看请求头的部分）：</p></blockquote><p>这是非跨域请求</p><p><img src="./image/002/004.png" alt="非跨域访问"></p><p>这是跨域请求</p><p><img src="./image/002/005.png" alt="跨域访问"></p><p>这时我们发现跨域访问的请求头中存在Origin的字段，用来记录当前的访问域名，我们可以再服务端增加一个响应头Access-Control-Allow-Origin来告诉浏览器我们支持它获取就可以了，代码实现：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Origin:http://127.0.0.1'</span>);</span><br><span class="line">$arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line"><span class="keyword">echo</span> $data = json_encode($arr);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>那如果我有多个域名进行跨域访问呢?</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$requestHeader = getallheaders();</span><br><span class="line">$origin = <span class="keyword">isset</span>($requestHeader[<span class="string">'Origin'</span>])?$requestHeader[<span class="string">'Origin'</span>]:<span class="string">''</span>;</span><br><span class="line"><span class="keyword">switch</span> ($origin) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://127.0.0.1'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://127.0.0.1'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://localhost'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://localhost'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">$arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line"><span class="keyword">echo</span> $data = json_encode($arr);</span><br><span class="line"><span class="comment">//注意，不支持下面这种写法</span></span><br><span class="line"><span class="comment">//header('Access-Control-Allow-Origin:http://localhost,http://127.0.0.1');</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>或者直接写成（很不安全，不推荐这么写）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Origin:*'</span>);</span><br><span class="line">$arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line"><span class="keyword">echo</span> $data = json_encode($arr);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>到这里，其实已经结束了，但还有一些其他的特殊情况:</p><ul><li>请求方法不是GET、HEAD、POST</li><li>请求头中存在自定义头</li><li>Content-Type不是text/plain、multipart/form-data、application/x-www-form-urlencoded</li><li>希望获取到服务端的Cookie</li></ul><p>为了应对种种限制，我们再来看一段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#demo1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url : <span class="string">'http://cui.tpadmin.top/crossDomain.php'</span>,</span><br><span class="line">        data : &#123;&#125;,</span><br><span class="line">        type : <span class="string">'PUT'</span>,</span><br><span class="line">        contentType : <span class="string">'application/json'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            token:<span class="string">'asdfgqwerttyyazxcvbvb'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="./image/002/006.png" alt="非简单请求跨域问题"></p><p>虽然我们在服务端加入了Access-Control-Allow-Origin响应头，但是如果出现上面所说的情况时，我们需要做一些特殊的设置，修改服务端代码为：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//这里增加了两行代码</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Headers:Content-Type'</span>);</span><br><span class="line">header(<span class="string">'Access-Control-Allow-Methods:PUT'</span>);</span><br><span class="line">$requestHeader = getallheaders();</span><br><span class="line">$origin = <span class="keyword">isset</span>($requestHeader[<span class="string">'Origin'</span>])?$requestHeader[<span class="string">'Origin'</span>]:<span class="string">''</span>;</span><br><span class="line"><span class="keyword">switch</span> ($origin) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://127.0.0.1'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://127.0.0.1'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://localhost'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://localhost'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">$arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line"><span class="keyword">echo</span> $data = json_encode($arr);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="./image/002/007.png" alt="非简单请求结果"></p><p>这里虽然成功了，但是我们发现每次请求的时候会出现两条请求记录（这个可不是我请求了两次，看下面截图）</p><p><img src="./image/002/008.png" alt="预检请求"><br><img src="./image/002/009.png" alt="预检请求"></p><p>这里我们需要进行一下区分（简单请求模式与非简单请求模式）</p><ol><li>请求方法只能为GET、HEAD、POST</li><li>请求头中无自定义头</li><li>Content-Type必须为text/plain、multipart/form-data、application/x-www-form-urlencoded</li></ol><p>符合以上条件的为简单请求，否则为非简单请求，注意，非简单请求中，浏览器会默认发送两条请求，第一条为预检请求（OPTION），第二条为AJAX的请求，处于服务器的性能考量，我们需要将预检命令进行缓存，而不是每次都执行预检请求，我们可以修改代码如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Headers:Content-Type'</span>);</span><br><span class="line">header(<span class="string">'Access-Control-Allow-Methods:PUT'</span>);</span><br><span class="line"><span class="comment">//看这里</span></span><br><span class="line">header(<span class="string">'Access-Control-Max-Age:3600'</span>);</span><br><span class="line">$requestHeader = getallheaders();</span><br><span class="line">$origin = <span class="keyword">isset</span>($requestHeader[<span class="string">'Origin'</span>])?$requestHeader[<span class="string">'Origin'</span>]:<span class="string">''</span>;</span><br><span class="line"><span class="keyword">switch</span> ($origin) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://127.0.0.1'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://127.0.0.1'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'http://localhost'</span>:</span><br><span class="line">        header(<span class="string">'Access-Control-Allow-Origin:http://localhost'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">$arr = [<span class="string">'code'</span> =&gt; <span class="number">200</span>, <span class="string">'name'</span> =&gt; <span class="string">'cui'</span>];</span><br><span class="line"><span class="keyword">echo</span> $data = json_encode($arr);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="./image/002/010.png" alt="缓存预检请求"></p><p>这次我请求了两次，发现第二次请求没有发送预检请求，新增加的代码代表允许缓存的时间（3600S）。</p><p>另外还有一些常用的方法，我都放到这里了，有需要的小伙伴可以参考</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//支持Cookie</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Credentials:true'</span>);</span><br><span class="line"><span class="comment">//支持自定义头</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Headers:token,Content-Type,...'</span>);﻿​</span><br><span class="line">由于篇幅有限，Cookie的例子小伙伴们自己做就可以了，使用Cookie的时候需要注意Access-Control-Allow-Origin不可设置为*。</span><br></pre></td></tr></table></figure><h2 id="服务软件实现跨域"><a href="#服务软件实现跨域" class="headerlink" title="服务软件实现跨域"></a>服务软件实现跨域</h2><p>上面的例子实现了跨域访问，但是如果我不想在代码中修改，还有其他的方法吗，当然有了，我们可以直接修改服务软件，下面将从最常用的Apache与Nignx两个方面说明</p><h3 id="基于Apache的服务"><a href="#基于Apache的服务" class="headerlink" title="基于Apache的服务"></a>基于Apache的服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">  ServerName localhost</span><br><span class="line">  ServerAlias localhost</span><br><span class="line">  DocumentRoot "$&#123;INSTALL_DIR&#125;/www"</span><br><span class="line">  </span><br><span class="line">  Header always set Access-Control-Allow-Header "PUT"</span><br><span class="line">  Header always set Access-Control-Allow-Credentials "true"</span><br><span class="line">  Header always set Access-Control-Max-Age "3600"</span><br><span class="line"><span class="meta">  #</span><span class="bash">这里设置的为全匹配</span></span><br><span class="line">  Header always set Access-Control-Allow-Origin "expr=%&#123;req:origin&#125;"</span><br><span class="line"><span class="meta">  #</span><span class="bash">这里设置的为全匹配</span></span><br><span class="line">  Header always set Access-Control-Allow-Headers "expr=%&#123;req:Access-Control-Allow-Headers&#125;"</span><br><span class="line">  </span><br><span class="line">  &lt;Directory "$&#123;INSTALL_DIR&#125;/www/"&gt;</span><br><span class="line">    Options +Indexes +Includes +FollowSymLinks +MultiViews</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Require local</span><br><span class="line">  &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><p>这里说明一下，由于Apache都是模块管理，所以这里要想使用Header的话，需要加载mod_headers.so这个模块，去看一下自己的主配置文件，这个模块是否开启，如果没有开启，apache会启动失败的。(开启配置内容：LoadModule headers_module modules/mod_headers.so)</p><p>由于本人学艺不精，Apache的配置中的判断没有完全闹懂，所以这里没有进行区分的匹配，如果有大神知道，请指导一下，不胜感激。</p><h3 id="基于Nignx的服务"><a href="#基于Nignx的服务" class="headerlink" title="基于Nignx的服务"></a>基于Nignx的服务</h3><p>在nignx服务的配置中修改为如下代码（注意位置，这个例子是修改本地的nignx，没有域名，如果没有熟悉过nignx的小伙伴可以自行百度）。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80 default_server;</span><br><span class="line">    listen       [::]:80 default_server;</span><br><span class="line">    server_name  _;</span><br><span class="line">    root         /usr/share/nginx/html;</span><br><span class="line">    # Load configuration files for the default server block.</span><br><span class="line">    include /etc/nginx/default.d/*.conf;</span><br><span class="line">    location / &#123;</span><br><span class="line">            #支持其他请求</span><br><span class="line">            add_header Access-Control-Allow-Methods PUT;</span><br><span class="line">            #设置预检请求的缓存</span><br><span class="line">            add_header Access-Control-Max-Age 3600;</span><br><span class="line">            #允许Cookie</span><br><span class="line">            add_header Access-Control-Allow-Credentials true;</span><br><span class="line">            #这里最好做判断，怕麻烦的话就写*，但是不建议</span><br><span class="line">            if ($http_origin = http://localhost)&#123;</span><br><span class="line">                    add_header Access-Control-Allow-Origin http://localhost;</span><br><span class="line">            &#125;</span><br><span class="line">            if ($http_origin = http://127.0.0.1)&#123;</span><br><span class="line">                    add_header Access-Control-Allow-Origin http://127.0.0.1;</span><br><span class="line">            &#125;</span><br><span class="line">            #为了方便，这样写了</span><br><span class="line">            add_header Access-Control-Allow-Headers $http_access_control_request_headers;</span><br><span class="line">            if ($request_method = OPTIONS)&#123;</span><br><span class="line">                    return 200;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    error_page 404 /404.html;</span><br><span class="line">        location = /40x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总之，跨域访问解决的方案多种多样，选择适合自己的就可以。</p><p>最后说明一下，本篇文章完全根据自己的学习以及经验所写，在严谨性上肯定有不足的地方，希望能帮到小伙伴们，如果发现问题，请及时联系我，谢谢。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;跨域访问解决方案&quot;&gt;&lt;a href=&quot;#跨域访问解决方案&quot; class=&quot;headerlink&quot; title=&quot;跨域访问解决方案&quot;&gt;&lt;/a&gt;跨域访问解决方案&lt;/h1&gt;&lt;h2 id=&quot;前后端分离&quot;&gt;&lt;a href=&quot;#前后端分离&quot; class=&quot;headerlink&quot; title=&quot;前后端分离&quot;&gt;&lt;/a&gt;前后端分离&lt;/h2&gt;&lt;h3 id=&quot;前后端分离的好处&quot;&gt;&lt;a href=&quot;#前后端分离的好处&quot; class=&quot;headerlink&quot; title=&quot;前后端分离的好处&quot;&gt;&lt;/a&gt;前后端分离的好处&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;最大的好处就是前端JS可以做很大部分的数据处理工作，对服务器的压力减小到最小。&lt;br&gt;后台错误不会直接反映到前台，错误接秒较为友好。&lt;br&gt;由于后台是很难去探知前台页面的分布情况，而这又是JS的强项，而JS又是无法独立和服务器进行通讯的。所以单单用后台去控制整体页面，又或者只靠JS完成效果，都会难度加大，前后台各尽其职可以最大程度的减少开发难度。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;前后端分离的模式&quot;&gt;&lt;a href=&quot;#前后端分离的模式&quot; class=&quot;headerlink&quot; title=&quot;前后端分离的模式&quot;&gt;&lt;/a&gt;前后端分离的模式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;第一种只是单纯的前后端分离，实在物理层面上的，将View层的任务分配给前端，Controller和Model层给后端，这就存在一个问题，就是后端的同事需要去关注前端的展示逻辑、而前端只要存在变化，后端的数据处理需要做相应的改变。&lt;br&gt;第二种是基于职责层面上的分离，将View和Controller层分配的前端，后端只处理Model和业务处理，这就需要Controller使用Node.js，M-V-C对应的是JAVA/PHP-JAVASCRIPT、HTML、CSS-Node.js。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;跨域问题存在的原因&quot;&gt;&lt;a href=&quot;#跨域问题存在的原因&quot; class=&quot;headerlink&quot; title=&quot;跨域问题存在的原因&quot;&gt;&lt;/a&gt;跨域问题存在的原因&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;随着前后端分离技术的越来越盛行，跨域问题也逐渐凸显了出来。跨域问题的根本原因：因为浏览器收到同源策略的限制，当前域名的js只能读取同域下的窗口属性。什么叫做同源策略？就是不同的域名, 不同端口, 不同的协议不允许共享资源的，保障浏览器安全。同源策略是针对浏览器设置的门槛。如果绕过浏览就能实现跨域，所以说早期的跨域都是打着安全路数的擦边球，都可以认为是 hack 处理。这一段是我从别的地方cp过来的，大家将就着看吧。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这里要注意的是，只有访问类型为xhr（XMLHttpRequest)的才会出现跨域。那么，我们如何处理跨域访问的问题呢？方法有三：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;修改浏览器的设置&lt;/li&gt;
&lt;li&gt;修改请求的方式：jsonp&lt;/li&gt;
&lt;li&gt;CORS&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="技能提升" scheme="http://blog.tpadmin.top/categories/%E6%8A%80%E8%83%BD%E6%8F%90%E5%8D%87/"/>
    
    
      <category term="CORS" scheme="http://blog.tpadmin.top/tags/CORS/"/>
    
      <category term="跨域访问" scheme="http://blog.tpadmin.top/tags/%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE/"/>
    
      <category term="前后端分离" scheme="http://blog.tpadmin.top/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/"/>
    
  </entry>
  
</feed>
